b2 = i4,
b3 = i4,
b4 = i4,
g1 = i4,
g2 = i4,
g3 = i4,
g4 = i4,
sigma = 0.7)
)
)}
samples
sampels
samples
##
## Rename bugs output, so it is a bit more user friendly
##
renameSamples <- function(samples){
return(data.frame(samples$BUGSoutput$sims.list))
}
y1 <- rbinom(N,prob = 0.2)
y1 <- rbinom(1,N,prob = 0.2)
y1 <- rbinom(1,N,prob = 0.1)
y2 <- rbinom(1,N,prob = 0.1)
t.test(y1,y2)
y1 <- rbinom(N,1,prob = 0.2)
y2 <- rbinom(N,1,prob = 0.1)
t.test(y1,y2)
t <- t.test(y1,y2)
t$p.value
errs <- vector()
errs <- vector()
for (N in 20:50) {
for (sims in 1:1000) {
y1 <- rbinom(N,1,prob = 0.2)
y2 <- rbinom(N,1,prob = 0.1)
t <- t.test(y1,y2)
ts <- t$p.value > 0.05
}
errs[N] <- sum(ts)/N
}
plot(1-errs)
errs <- vector()
for (N in 10:50) {
for (sims in 1:10000) {
y1 <- rbinom(N,1,prob = 0.2)
y2 <- rbinom(N,1,prob = 0.1)
t <- t.test(y1,y2)
ts <- t$p.value > 0.05
}
errs[N] <- sum(ts)/N
}
plot(1-errs)
y1 <- rbinom(N,1,prob = 0.2)
y2 <- rbinom(N,1,prob = 0.1)
y2
t <- t.test(y1,y2)
t$p.value
errs <- vector()
for (N in 10:50) {
ts <- vector()
for (sims in 1:10000) {
y1 <- rbinom(N,1,prob = 0.2)
y2 <- rbinom(N,1,prob = 0.1)
t <- t.test(y1,y2)
ts[sims] <- t$p.value > 0.05
}
errs[N] <- sum(ts)/N
}
plot(1-errs)
sum(ts)
N
N <- 100
errs <- vector()
for (N in 10:50) {
ts <- vector()
for (sims in 1:1000) {
y1 <- rbinom(N,1,prob = 0.2)
y2 <- rbinom(N,1,prob = 0.1)
t <- t.test(y1,y2)
ts[sims] <- t$p.value > 0.05
}
errs[N] <- sum(ts)/1000
}
plot(1-errs)
errs <- vector()
for (N in 10:200) {
ts <- vector()
for (sims in 1:1000) {
y1 <- rbinom(N,1,prob = 0.2)
y2 <- rbinom(N,1,prob = 0.1)
t <- t.test(y1,y2)
ts[sims] <- t$p.value > 0.05
}
errs[N] <- sum(ts)/1000
}
plot(1-errs)
N <- 100
errs <- vector()
for (N in 10:2000) {
ts <- vector()
for (sims in 1:10000) {
y1 <- rbinom(N,1,prob = 0.2)
y2 <- rbinom(N,1,prob = 0.1)
t <- t.test(y1,y2)
ts[sims] <- t$p.value > 0.05
}
errs[N] <- sum(ts)/1000
}
errs <- vector()
for (N in 10:400) {
ts <- vector()
for (sims in 1:2000) {
y1 <- rbinom(N,1,prob = 0.2)
y2 <- rbinom(N,1,prob = 0.1)
t <- t.test(y1,y2)
ts[sims] <- t$p.value > 0.05
}
errs[N] <- sum(ts)/1000
}
plot(1-errs,xlab="#surveys per group")
abline(h=.80,col='red')
abline(h=.90,col='red')
library(lme4)
setwd('~/Documents/plaster')
df <- read.csv('Adhesive Study Complete Dataset.csv',header=T)
colnames(df)
df <- df[which(df$q_complete == 1),]
df <- df[which(df$sensor_loss %in% c(0,1)),]
df <- df[which(df$patch_use %in% c(0,1)),]
df$patch_use <- factor(df$patch_use)
df$sensor_loss <- factor(df$sensor_loss)
df$participant_id
p1 <- df$participant_id
df[which(df$participant_id==p1 & df$patch_use==1),]
df[which(df$participant_id==p1 & df$patch_use==1),"sensor_loss"]
dim(df)
p1
p1 <- df$participant_id[1]
df[which(df$participant_id==p1 & df$patch_use==1),"sensor_loss"]
df[which(df$participant_id==p1 & df$patch_use==1),"sensor_loss"]
df[which(df$participant_id==p1 & df$patch_use==0),"sensor_loss"]
p1 <- df$participant_id[1]
y.patch <- df[which(df$participant_id==p1 & df$patch_use==1),"sensor_loss"]
y.nopatch <- df[which(df$participant_id==p1 & df$patch_use==0),"sensor_loss"]
p.patch <- sum(y.patch)/length(y.patch)
y.nopatch <- as.numeric(df[which(df$participant_id==p1 & df$patch_use==0),"sensor_loss"])
p.patch <- sum(y.patch)/length(y.patch)
setwd('~/Documents/plaster')
df <- read.csv('Adhesive Study Complete Dataset.csv',header=T)
colnames(df)
df <- df[which(df$q_complete == 1),]
df <- df[which(df$sensor_loss %in% c(0,1)),]
df <- df[which(df$patch_use %in% c(0,1)),]
y.patch <- df[which(df$participant_id==p1 & df$patch_use==1),"sensor_loss"]
y.nopatch <- df[which(df$participant_id==p1 & df$patch_use==0),"sensor_loss"]
p.patch <- sum(y.patch)/length(y.patch)
y.patch <- as.numeric(as.character(y.patch))
y.nopatch <- as.numeric(as.character(y.nopatch))
p.patch <- sum(y.patch)/length(y.patch)
p.nopatch <- sum(y.nopatch)/length(y.nopatch)
p.patch
p.nopatch
for (i in length(df$participant_id)) {
p1 <- df$participant_id[1]
y.patch <- df[which(df$participant_id==p1 & df$patch_use==1),"sensor_loss"]
y.nopatch <- df[which(df$participant_id==p1 & df$patch_use==0),"sensor_loss"]
y.patch <- as.numeric(as.character(y.patch))
y.nopatch <- as.numeric(as.character(y.nopatch))
p.patch[i] <- sum(y.patch)/length(y.patch)
p.nopatch[i] <- sum(y.nopatch)/length(y.nopatch)
person[i] <- p1
}
p1 <- df$participant_id[i]
y.patch <- df[which(df$participant_id==p1 & df$patch_use==1),"sensor_loss"]
y.nopatch <- df[which(df$participant_id==p1 & df$patch_use==0),"sensor_loss"]
y.patch <- as.numeric(as.character(y.patch))
y.nopatch <- as.numeric(as.character(y.nopatch))
p.patch[i] <- sum(y.patch)/length(y.patch)
p.nopatch[i] <- sum(y.nopatch)/length(y.nopatch)
person[i] <- p1
p1
person[i] <- as.String(p1)
toString(p1)
person[i]
pers[i] <- toString(p1)
pers <- vector()
pers[i] <- toString(p1)
for (i in length(df$participant_id)) {
p1 <- df$participant_id[i]
y.patch <- df[which(df$participant_id==p1 & df$patch_use==1),"sensor_loss"]
y.nopatch <- df[which(df$participant_id==p1 & df$patch_use==0),"sensor_loss"]
y.patch <- as.numeric(as.character(y.patch))
y.nopatch <- as.numeric(as.character(y.nopatch))
p.patch[i] <- sum(y.patch)/length(y.patch)
p.nopatch[i] <- sum(y.nopatch)/length(y.nopatch)
pers[i] <- toString(p1)
}
df.prop <- data.fram(p.patch = p.patch,
p.nopatch = p.nopatch,
pers = pers)
df.prop <- data.frame(p.patch = p.patch,
p.nopatch = p.nopatch,
pers = pers)
df.prop
length(df$participant_id)
pers <- vector()
for (i in length(unique(df$participant_id))) {
p1 <- df$participant_id[i]
y.patch <- df[which(df$participant_id==p1 & df$patch_use==1),"sensor_loss"]
y.nopatch <- df[which(df$participant_id==p1 & df$patch_use==0),"sensor_loss"]
y.patch <- as.numeric(as.character(y.patch))
y.nopatch <- as.numeric(as.character(y.nopatch))
p.patch[i] <- sum(y.patch)/length(y.patch)
p.nopatch[i] <- sum(y.nopatch)/length(y.nopatch)
pers[i] <- toString(p1)
}
p.nopatch <- vector()
p.patch <- vector()
pers <- vector()
for (i in length(unique(df$participant_id))) {
p1 <- df$participant_id[i]
y.patch <- df[which(df$participant_id==p1 & df$patch_use==1),"sensor_loss"]
y.nopatch <- df[which(df$participant_id==p1 & df$patch_use==0),"sensor_loss"]
y.patch <- as.numeric(as.character(y.patch))
y.nopatch <- as.numeric(as.character(y.nopatch))
p.patch[i] <- sum(y.patch)/length(y.patch)
p.nopatch[i] <- sum(y.nopatch)/length(y.nopatch)
pers[i] <- toString(p1)
}
df.prop <- data.frame(p.patch = p.patch,
p.nopatch = p.nopatch,
pers = pers)
dim(df.prop)
0:32
plot('',xlim=1:32,ylim=0:1)
plot('',xlim=seq(1,32),ylim=c(0,1))
seq(1,32)
plot('',xlim=c(1,32),ylim=c(0,1))
points(p.patch,data=df.prop)
points(p.patch,i:32,data=df.prop)
points(df.prop$p.patch,i:32)
points(df.prop$p.patch,1:32)
df.prop$p.patch
points(df.prop$p.patch,1:32)
df.prop$p.patch
df.prop$p.patch
p.nopatch <- vector()
p.patch <- vector()
pers <- vector()
for (i in length(unique(df$participant_id))) {
p1 <- df$participant_id[i]
y.patch <- df[which(df$participant_id==p1 & df$patch_use==1),"sensor_loss"]
y.nopatch <- df[which(df$participant_id==p1 & df$patch_use==0),"sensor_loss"]
y.patch <- as.numeric(as.character(y.patch))
y.nopatch <- as.numeric(as.character(y.nopatch))
p.patch[i] <- sum(y.patch)/length(y.patch)
p.nopatch[i] <- sum(y.nopatch)/length(y.nopatch)
pers[i] <- toString(p1)
}
df.prop <- data.frame(p.patch = p.patch,
p.nopatch = p.nopatch,
pers = pers)
dim(df.prop)
df.prop
p1 <- df$participant_id[i]
i
i = 1
participants <- unique(df$participant_id)
for (i in 1:length(participants)) {
p1 <- participants[i]
y.patch <- df[which(df$participant_id==p1 & df$patch_use==1),"sensor_loss"]
y.nopatch <- df[which(df$participant_id==p1 & df$patch_use==0),"sensor_loss"]
y.patch <- as.numeric(as.character(y.patch))
y.nopatch <- as.numeric(as.character(y.nopatch))
p.patch[i] <- sum(y.patch)/length(y.patch)
p.nopatch[i] <- sum(y.nopatch)/length(y.nopatch)
pers[i] <- toString(p1)
}
df.prop <- data.frame(p.patch = p.patch,
p.nopatch = p.nopatch,
pers = pers)
df.prop
plot('',xlim=c(1,32),ylim=c(0,1))
points(df.prop$p.patch,1:32)
df.prop$p.patch
points(df.prop$p.patch,(1:32))
points((1:32),df.prop$p.patch)
points((1:32),df.prop$p.patch,col='red')
plot('',xlim=c(1,32),ylim=c(0,1))
points((1:32),df.prop$p.patch,col='red')
points((1:32),df.prop$p.nopatch)
points((1:32),df.prop$p.patch,col='red',pch='x')
grid()
particpants[5]
participants[5]
i = 5
p1 <- participants[i]
y.patch <- df[which(df$participant_id==p1 & df$patch_use==1),"sensor_loss"]
y.nopatch <- df[which(df$participant_id==p1 & df$patch_use==0),"sensor_loss"]
y.patch <- as.numeric(as.character(y.patch))
y.nopatch <- as.numeric(as.character(y.nopatch))
y.patch
df[which(participant_id===5),]
df[which(df$participant_id===5),]
df[which(df$participant_id===5),]
df[which(df$participant_id==5),]
df[which(df$participant_id==5),c("sensor_loss",'patch_use')]
colnames(df)
df[which(df$participant_id==5),c("sensor_loss",'patch_use')]
y.patch
y.nopatch
df[which(df$participant_id==p1),c("sensor_loss",'patch_use')]
i = 18
p1 <- participants[i]
y.patch <- df[which(df$participant_id==p1 & df$patch_use==1),"sensor_loss"]
y.nopatch <- df[which(df$participant_id==p1 & df$patch_use==0),"sensor_loss"]
y.patch <- as.numeric(as.character(y.patch))
y.nopatch <- as.numeric(as.character(y.nopatch))
p.patch[i] <- sum(y.patch)/length(y.patch)
p.nopatch[i] <- sum(y.nopatch)/length(y.nopatch)
df[which(df$participant_id==p1),c("sensor_loss",'patch_use')]
plot('',xlim=c(1,32),ylim=c(0,1))
points((1:32),df.prop$p.patch,col='red',pch='x')
points((1:32),df.prop$p.nopatch)
grid()
participants[5]
plot('',xlim=c(1,32),ylim=c(0,1),xlab='participant')
plot('',xlim=c(1,32),ylim=c(0,1),xlab='participant',
ylab='proportion sensor loss')
points((1:32),df.prop$p.patch,col='red',pch='x')
points((1:32),df.prop$p.nopatch)
grid()
participants[5]
plot('',xlim=c(1,35),ylim=c(0,1),xlab='participant',
ylab='proportion sensor loss')
points((1:32),df.prop$p.patch,col='red',pch='x')
points((1:32),df.prop$p.nopatch)
grid()
legend(35,0.8,c('patch','no patch'),
lty=c(1,1),
lwd=c(2.5,2.5),col=c('red,'black''))
participants[5]
legend(35,0.8,c('patch','no patch'),
lty=c(1,1),
lwd=c(2.5,2.5),col=c('red,'black))
lwd=c(2.5,2.5),col=c('red,'black'))
legend(35,0.8,c('patch','no patch'),
lty=c(1,1),
lwd=c(2.5,2.5),col=c('red','black'))
legend(35,0.8,c('patch','no patch'),
lty=c(1,1),
lwd=c(2.5,2.5),col=c('red','black'))
legend(28,1.2,c('patch','no patch'),
lty=c(1,1),
lwd=c(2.5,2.5),col=c('red','black'))
plot('',xlim=c(1,35),ylim=c(0,1.2),xlab='participant',
ylab='proportion sensor loss')
points((1:32),df.prop$p.patch,col='red',pch='x')
points((1:32),df.prop$p.nopatch)
grid()
legend(28,1.2,c('patch','no patch'),
lty=c(1,1),
lwd=c(2.5,2.5),col=c('red','black'))
legend(22,1.2,c('patch','no patch'),
lty=c(1,1),
lwd=c(1.5,1.5),col=c('red','black'))
plot('',xlim=c(1,40),ylim=c(0,1.2),xlab='participant',
ylab='proportion sensor loss')
points((1:32),df.prop$p.patch,col='red',pch='x')
points((1:32),df.prop$p.nopatch)
grid()
legend(22,1.2,c('patch','no patch'),
lty=c(1,1),
lwd=c(1.5,1.5),col=c('red','black'))
plot('',xlim=c(1,40),ylim=c(0,1.5),xlab='participant',
ylab='proportion sensor loss')
points((1:32),df.prop$p.patch,col='red',pch='x')
points((1:32),df.prop$p.nopatch)
grid()
legend(22,1.2,c('patch','no patch'),
lty=c(1,1),
lwd=c(1.5,1.5),col=c('red','black'))
legend(22,1.45,c('patch','no patch'),
lty=c(1,1),
lwd=c(1.5,1.5),col=c('red','black'))
plot('',xlim=c(1,40),ylim=c(0,1.5),xlab='participant',
ylab='proportion sensor loss')
points((1:32),df.prop$p.patch,col='red',pch='x')
points((1:32),df.prop$p.nopatch)
grid()
legend(22,1.45,c('patch','no patch'),
lty=c(1,1),
lwd=c(1.5,1.5),col=c('red','black'))
participants[5]
plot('',xlim=c(1,40),ylim=c(0,1.5),xlab='participant',
ylab='proportion sensor loss')
points((1:32),df.prop$p.patch,col='red',pch='x')
points((1:32),df.prop$p.nopatch)
plot('',xlim=c(1,32),ylim=c(0,1.5),xlab='participant',
ylab='proportion sensor loss')
points((1:32),df.prop$p.patch,col='red',pch='x')
points((1:32),df.prop$p.nopatch)
grid()
plot('',xlim=c(1,32),ylim=c(0,1),xlab='participant',
ylab='proportion sensor loss')
points((1:32),df.prop$p.patch,col='red',pch='x')
points((1:32),df.prop$p.nopatch)
grid()
abline(seq(1,32),color='grey')
abline(seq(1,32),colour='grey')
abline(seq(1,32),col='grey')
abline(v=seq(1,32),col='grey')
abline(v=seq(1,32),col='lightgrey')
?grid
plot('',xlim=c(1,32),ylim=c(0,1),xlab='participant',
ylab='proportion sensor loss')
points((1:32),df.prop$p.patch,col='red',pch='x')
points((1:32),df.prop$p.nopatch)
grid(nx=32)
grid(nx=32,ny=10)
plot('',xlim=c(1,32),ylim=c(0,1),xlab='participant',
ylab='proportion sensor loss')
points((1:32),df.prop$p.patch,col='red',pch='x')
points((1:32),df.prop$p.nopatch)
grid(nx=32,ny=10)
which(p.patch < p.nopatch)
which(p.patch > p.nopatch)
which(p.patch == p.nopatch)
i = 18
p1 <- participants[i]
df[which(df$participant_id==p1),c("sensor_loss",'patch_use')]
which(p.patch < p.nopatch)
df[which(df$participant_id==p1),c("sensor_loss",'patch_use')]
p.nopatch[i] <- sum(y.nopatch)/length(y.nopatch)
n.patch[i] <- length(y.patch)
n.patch[i] <- length(y.patch)
n.nopatch <- vector()
n.patch <- vector()
pers <- vector()
participants <- unique(df$participant_id)
for (i in 1:length(participants)) {
p1 <- participants[i]
y.patch <- df[which(df$participant_id==p1 & df$patch_use==1),"sensor_loss"]
y.nopatch <- df[which(df$participant_id==p1 & df$patch_use==0),"sensor_loss"]
y.patch <- as.numeric(as.character(y.patch))
y.nopatch <- as.numeric(as.character(y.nopatch))
p.patch[i] <- sum(y.patch)/length(y.patch)
n.patch[i] <- length(y.patch)
p.nopatch[i] <- sum(y.nopatch)/length(y.nopatch)
pers[i] <- toString(p1)
n.nopatch[i] <- length(y.nopatch)
}
df.prop <- data.frame(p.patch = p.patch,
p.nopatch = p.nopatch,
pers = pers,
n.patch = n.patch,
n.nopatch = n.nopatch)
?points
plot('',xlim=c(1,32),ylim=c(0,1),xlab='participant',
ylab='proportion sensor loss')
points((1:32),df.prop$p.patch,col='red',pch='x',size=df$n.patch)
df$n.patch
n.patch[i] <- length(y.patch)
p.nopatch[i] <- sum(y.nopatch)/length(y.nopatch)
pers[i] <- toString(p1)
n.nopatch[i] <- length(y.nopatch)
n.patch
for (i in 1:length(participants)) {
p1 <- participants[i]
y.patch <- df[which(df$participant_id==p1 & df$patch_use==1),"sensor_loss"]
y.nopatch <- df[which(df$participant_id==p1 & df$patch_use==0),"sensor_loss"]
y.patch <- as.numeric(as.character(y.patch))
y.nopatch <- as.numeric(as.character(y.nopatch))
p.patch[i] <- sum(y.patch)/length(y.patch)
n.patch[i] <- length(y.patch)
p.nopatch[i] <- sum(y.nopatch)/length(y.nopatch)
pers[i] <- toString(p1)
n.nopatch[i] <- length(y.nopatch)
}
df.prop <- data.frame(p.patch = p.patch,
p.nopatch = p.nopatch,
pers = pers,
n.patch = n.patch,
n.nopatch = n.nopatch)
df.prop
plot('',xlim=c(1,32),ylim=c(0,1),xlab='participant',
ylab='proportion sensor loss')
points((1:32),df.prop$p.patch,col='red',size=df$n.patch)
points((1:32),df.prop$p.patch,col='red',fill='red',size=df$n.patch)
points((1:32),df.prop$p.patch,col='red',bg='red',size=df$n.patch)
points((1:32),df.prop$p.patch,col='red',bg='red',size=df$n.patch)
plot('',xlim=c(1,32),ylim=c(0,1),xlab='participant',
ylab='proportion sensor loss')
plot('',xlim=c(1,32),ylim=c(0,1),xlab='participant',
ylab='proportion sensor loss')
points((1:32),df.prop$p.patch,col='red',bg='red',size=df$n.patch)
points((1:32),df.prop$p.patch,col='red',pch=16,cex=df$n.patch)
df$n.patch
points((1:32),df.prop$p.patch,col='red',pch=16,cex=df.prop$n.patch)
df.prop$n.patch
points((1:32),df.prop$p.patch,col='red',pch=16,cex=df.prop$n.patch/10)
plot('',xlim=c(1,32),ylim=c(0,1),xlab='participant',
ylab='proportion sensor loss')
points((1:32),df.prop$p.patch,col='red',pch=16,cex=df.prop$n.patch/10)
points((1:32),df.prop$p.patch,col='red',pch=16,cex=df.prop$n.patch/5)
points((1:32),df.prop$p.nopatch,col='blue',pch=16,cex=df.prop$n.nopatch/5)
grid(nx=32,ny=10)
plot('',xlim=c(1,32),ylim=c(0,1),xlab='participant',
ylab='proportion sensor loss')
points((1:32),df.prop$p.patch,col='red',pch=16,cex=df.prop$n.patch/5)
points((1:32),df.prop$p.nopatch,col='blue',pch=16,cex=df.prop$n.nopatch/10)
grid(nx=32,ny=10)
